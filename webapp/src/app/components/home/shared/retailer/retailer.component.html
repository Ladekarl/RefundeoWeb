<div class="row">
    <div class="col-sm-6">
        <form class="align-self-center" (ngSubmit)="onSubmit()" #retailerForm="ngForm">
            <h6 *ngIf="isAdmin">Account Information</h6>
            <div *ngIf="isAdmin" class="form-group">
                <label for="username">Username</label>
                <input type="text" [readonly]="isEdit" class="form-control" [class.form-control-plaintext]="isEdit" id="username" placeholder="Username" required
                       [(ngModel)]="model.username" name="username"/>
            </div>
            <div *ngIf="isAdmin && !isEdit" class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" id="password" placeholder="Password" required
                       [(ngModel)]="model.password" name="password"/>
            </div>
            <div *ngIf="isAdmin" class="form-group">
                <label for="adminEmail">Admin email</label>
                <input type="email" class="form-control" id="adminEmail" placeholder="Admin email" required
                       [(ngModel)]="model.adminEmail" name="password" email/>
            </div>
            <h6 *ngIf="isAdmin">Retailer Information</h6>
            <h6 class="row" *ngIf="isMerchant">Company</h6>
            <div class="col-sm-12">
                <div *ngIf="isAdmin" class="form-group row">
                    <label id="uploadBanner"
                           class="form-control btn btn-primary col-sm-12 col-lg-12 col-xl-5 upload-button">
                        Upload Banner <input type="file" accept="image/png" hidden required
                                             (change)="uploadBanner($event)"
                                             name="banner">
                    </label>
                    <label id="uploadLogo"
                           class="form-control btn btn-primary col-sm-12 col-lg-12 col-xl-5 offset-xl-2 upload-button">
                        Upload Logo <input type="file" accept="image/png" hidden required (change)="uploadLogo($event)"
                                           name="logo">
                    </label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-12">
                    <label for="companyName">Company Name</label>
                    <input type="text" class="form-control"
                           id="companyName"
                           placeholder="Company Name"
                           required
                           [(ngModel)]="model.companyName"
                           name="companyName">
                </div>
            </div>
            <div *ngIf="isAdmin" class="form-group row">
                <div class="col-sm-12">
                    <label for="cvrNumber">CVR no.</label>
                    <input type="text" class="form-control" id="cvrNumber" placeholder="CVR no."
                           [(ngModel)]="model.cvrNumber" name="cvrNumber"/>
                </div>
            </div>
            <div *ngIf="isAdmin" class="form-group row">
                <div class="col-sm-12">
                    <label for="vatNumber">VAT no.</label>
                    <input type="text" class="form-control" id="vatNumber" placeholder="VAT no." required
                           [(ngModel)]="model.vatNumber" name="vatNumber"/>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-12">
                    <label for="currency">Currency</label>
                    <input type="text" class="form-control" id="currency" placeholder="Currency" required
                           [(ngModel)]="model.currency" name="currency"/>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-12">
                    <label for="description">Description</label>
                    <textarea class="form-control description-text" id="description" rows="10" placeholder="Description"
                              required
                              [(ngModel)]="model.description" name="description"></textarea>
                </div>
            </div>
            <div *ngIf="isAdmin" class="form-group row">
                <div class="col-sm-12">
                    <label for="vatRate">VAT Rate (%)</label>
                    <input type="number" class="form-control" id="vatRate" placeholder="VAT rate %" required
                           pattern="^[0-9][0-9]?$|^100$" [(ngModel)]="model.vatRate" name="vatRate"/>
                </div>
            </div>
            <div *ngIf="isAdmin" class="form-group row">
                <div class="col-sm-12">
                    <label for="vatRate">Rating (0-5)</label>
                    <input type="number" min="0" max="5" class="form-control" id="rating" placeholder="Rating" required
                           pattern="^([0-4](\.\d{0,1})?|5)$" [(ngModel)]="model.rating" name="rating"/>
                </div>
            </div>
            <div *ngIf="isAdmin"  class="form-group row">
                <div class="col-sm-12">
                    <label for="vatRate">Price Level</label>
                    <select class="form-control" id="priceLevel" required [(ngModel)]="model.priceLevel" name="priceLevel">
                        <option disabled selected value>Select price level</option>
                        <option value="1">$</option>
                        <option value="2">$$</option>
                        <option value="3">$$$</option>
                    </select>
                </div>
            </div>
            <h6 class="row">Address</h6>
            <div class="form-group row">
                <div class="col-lg-6 col-sm-12">
                    <label for="streetName">Street name</label>
                    <input type="text" id="streetName" class="form-control" placeholder="Street name" required
                           [(ngModel)]="model.addressStreetName" name="streetName"/>
                </div>
                <div class="col-lg-6 col-sm-12">
                    <label for="houseNumber">House number</label>
                    <input type="text" id="houseNumber" class="form-control" placeholder="House number" required
                           [(ngModel)]="model.addressStreetNumber" name="streetNumber"/>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-lg-6 col-sm-12">
                    <label for="city">City</label>
                    <input type="text" id="city" class="form-control" placeholder="City" required
                           [(ngModel)]="model.addressCity" name="city"/>
                </div>
                <div class="col-lg-6 col-sm-12">
                    <label for="postalCode">Postal code</label>
                    <input type="text" id="postalCode" class="form-control" placeholder="Postal code" required
                           [(ngModel)]="model.addressPostalCode" name="postalCode"/>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-12">
                    <label for="country">Country</label>
                    <input type="text" id="country" class="form-control" placeholder="Country" required
                           [(ngModel)]="model.addressCountry" name="country"/>
                </div>
            </div>
            <h6 class="row">Location</h6>
            <div class="form-group row">
                <div class="col-lg-6 col-sm-12">
                    <label for="latitude">Latitude</label>
                    <input type="number" class="form-control" id="latitude" placeholder="Latitude" required
                           [(ngModel)]="model.latitude" name="latitude"/>
                </div>
                <div class="col-lg-6 col-sm-12">
                    <label for="longitude">Longitude</label>
                    <input type="number" class="form-control" id="longitude" placeholder="Longitude" required
                           [(ngModel)]="model.longitude" name="longitude"/>
                </div>
            </div>
            <h6 class="row">Contact</h6>
            <div class="form-group row">
                <div class="col-lg-6 col-sm-12">
                    <label for="contactEmail">Contact email</label>
                    <input type="email" class="form-control" id="contactEmail" placeholder="Contact email" required
                           [(ngModel)]="model.contactEmail" name="contactEmail" email=""/>
                </div>
                <div class="col-lg-6 col-sm-12">
                    <label for="contactPhone">Contact phone</label>
                    <input type="tel" class="form-control" id="contactPhone" placeholder="Contact phone no."
                           required
                           [(ngModel)]="model.contactPhone" name="contactPhone"/>
                </div>
            </div>
            <h6 class="row">Opening Hours (HH:MM)</h6>
            <div *ngFor="let openingHour of model.openingHours">
                <div class="form-group row align-items-center">
                    <label *ngIf="openingHour.day === 1" class="col-sm-2 center-text">Monday</label>
                    <label *ngIf="openingHour.day === 2" class="col-sm-2 center-text">Tuesday</label>
                    <label *ngIf="openingHour.day === 3" class="col-sm-2 center-text">Wednesday</label>
                    <label *ngIf="openingHour.day === 4" class="col-sm-2 center-text">Thursday</label>
                    <label *ngIf="openingHour.day === 5" class="col-sm-2 center-text">Friday</label>
                    <label *ngIf="openingHour.day === 6" class="col-sm-2 center-text">Saturday</label>
                    <label *ngIf="openingHour.day === 0" class="col-sm-2 center-text">Sunday</label>
                    <div class="col-lg-5 col-sm-12">
                        <input type="text" pattern="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" class="form-control"
                               placeholder="Open"
                               [(ngModel)]="openingHour.open" name="{{openingHour.day}}open"/>
                    </div>
                    <div class="col-lg-5 col-sm-12">
                        <input type="text" pattern="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" class="form-control"
                               placeholder="Close"
                               [(ngModel)]="openingHour.close" name="{{openingHour.day}}close"/>
                    </div>
                </div>
            </div>
            <h6 *ngIf="isAdmin" class="row">Fees</h6>
            <div *ngIf="isAdmin" class="form-group row">
                <div class="col-sm-3">
                    <label>From price ({{model.currency}})</label>
                </div>
                <div class="col-sm-3">
                    <label>To price ({{model.currency}})</label>
                </div>
                <div class="col-sm-3">
                    <label>Merchant fee (%)</label>
                </div>
                <div class="col-sm-2">
                    <label>Admin fee (%)</label>
                </div>
                <div class="col-sm-1">
                </div>
            </div>
            <div *ngIf="isAdmin">
                <div *ngFor="let feePoint of feePoints; let i = index">
                    <div class="form-group row">
                        <div class="col-sm-3">
                            <input type="number" min="0" class="form-control" id="{{i}}startFee" placeholder="From price ({{model.currency}})" required
                                [(ngModel)]="feePoint.start" name="{{i}}startFee"/>
                        </div>
                        <div class="col-sm-3">
                            <input type="number" min="0" class="form-control" id="{{i}}endFee" placeholder="To price ({{model.currency}})"
                                [(ngModel)]="feePoint.end" name="{{i}}endFee"/>
                        </div>
                        <div class="col-sm-3">
                            <input type="number" min="0" max="100" class="form-control" id="{{i}}merchantFee" placeholder="Merchant fee %" required
                                [(ngModel)]="feePoint.merchantFee" name="{{i}}merchantFee" pattern="^[0-9][0-9]?$|^100$"/>
                        </div>
                        <div class="col-sm-2">
                            <input type="number" min="0" max="100" class="form-control" id="{{i}}adminFee" placeholder="Admin fee %" required
                                [(ngModel)]="feePoint.adminFee" name="{{i}}adminFee" pattern="^[0-9][0-9]?$|^100$"/>
                        </div>
                        <div class="col-sm-1 align-self-center">
                            <i class="btn btn-outline-danger fa fa-times" (click)="onRemoveFee(i)"></i>
                        </div>
                    </div>
                </div>
            </div>
            <form *ngIf="isAdmin" class="form-group row fee-point-form" #feePointForm="ngForm" (ngSubmit)="onAddFeePoint()">
                <div class="col-sm-3">
                    <input type="number" min="0" class="form-control" id="newStartFee" required placeholder="From price"
                           [(ngModel)]="newFeePoint.start" name="newStartFee"/>
                </div>
                <div class="col-sm-3">
                    <input type="number" min="0" class="form-control" id="newEndFee" required placeholder="Leave empty if undefined"
                           [(ngModel)]="newFeePoint.end" name="newEndFee"/>
                </div>
                <div class="col-sm-3">
                    <input type="number" min="0" max="100" class="form-control" id="newMerchantFee" required placeholder="25"
                           [(ngModel)]="newFeePoint.merchantFee" name="newMerchantFee" pattern="^[0-9][0-9]?$|^100$"/>
                </div>
                <div class="col-sm-2">
                    <input type="number" min="0" max="100" class="form-control" required id="newAdminFee" placeholder="10"
                           [(ngModel)]="newFeePoint.adminFee" name="newAdminFee" pattern="^[0-9][0-9]?$|^100$"/>
                </div>
                <div class="col-sm-1 align-self-center">
                    <button id="addFeePoint" type="submit" class="btn btn-outline-primary fa fa-plus" [disabled]="!feePointForm.form.valid"></button>
                </div>
            </form>
            <h6 class="row" *ngIf="isAdmin">Tags</h6>
            <div *ngIf="isAdmin" class="form-group">
                <div class="form-group row">
                    <div class="col-xl-6" *ngFor="let tag of tags">
                        <div class="form-check form-check-inline">
                            <input type="checkbox" id="tag{{tag.key}}"
                                    class="form-check-input"
                                    (change)="onCheckTag(tag)" [ngModel]="model.tags.indexOf(tag.key) > -1"
                                    name="{{tag.value}}"/>
                            <label class="form-check-label" for="tag{{tag.key}}">{{tag.value}}</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <button *ngIf="isAdmin && !isEdit" type="submit" [disabled]="!retailerForm.form.valid"
                        class="btn btn-primary col-sm-12">
                    Add retailer
                </button>
                <button *ngIf="isMerchant || isEdit" type="submit" [disabled]="!retailerForm.form.valid"
                        class="btn btn-primary col-sm-12">
                    Save changes
                </button>
            </div>
        </form>
    </div>
    <div id="mockup-container" class="col-sm-6 col-lg-5 offset-lg-1 col-xl-4 offset-xl-2">
        <div id="mockup-device" class="device-wrapper">
            <div class="device" data-device="iPhone7" data-orientation="portrait" data-color="black">
                <div class="screen">
                    <div class="header-container" *ngIf="model.companyName">
                        <i class="fa fa-lg fa-angle-left back-icon"></i>
                        <div class="company-container"><span class="company-text">{{model.companyName}}</span></div>
                        <div></div>
                    </div>
                    <div *ngIf="model.banner" class="banner-container"
                         [ngStyle]="{'background-image': 'url(' + model.banner + ')'}">
                        <div *ngIf="model.logo" class="logo-container">
                            <img class="logo" [src]="model.logo">
                        </div>
                    </div>
                    <div class="banner-text-bar-container">
                        <div class="banner-column-container">
                            <span class="left-text">Opening Hours</span>
                            <span class="left-text">Min. Refund</span>
                        </div>
                        <div class="banner-column-container">
                            <span class="content-text">{{model.openingHours[date.getDay()]?.open}} - {{model.openingHours[date.getDay()]?.close}}</span>
                            <span class="content-text">{{getMinimumRefundPercentage() | number:'1.0-1'}} %</span>
                        </div>
                    </div>
                    <div class="content-container">
                        <div class=description-container>
                            {{model.description}}
                        </div>
                        <div class="bottom-container" *ngIf="model.addressStreetName">
                            <span class="bottom-title-text">Address</span>
                            <span class="bottom-text">
                            {{model.addressStreetName}} {{model.addressStreetNumber}}, {{model.addressPostalCode}} {{model.addressCity}}, {{model.addressCountry}}
                        </span>
                        </div>
                        <div class="bottom-container" *ngIf="model.vatNumber">
                            <span class="bottom-title-text">VAT no.</span>
                            <span class="bottom-text">
                            {{model.vatNumber}}
                        </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
